# 完整路由缓存


## 工作原理

Next.js 在构建的时候会自动渲染和缓存路由，这样当访问路由的时候，可以直接使用缓存中的路由而不用从零开始在服务端渲染，从而加快页面加载速度。

路由缓存：

next.js 使用React的API来编排渲染。当渲染的时候，渲染工作会根据路由和Suspense拆分成多个chunk，每个chunk分为两步进行渲染。

- 1、React 会将服务端组件渲染成一种特殊的数据格式，我们称之为React Server Component Payload，简写成RSC payload。比如一个服务端组件的代码为：

这个格式针对流做了优化，他们可以以流的形式逐行从服务端发送给客户端，客户端可以逐行解析 RSC Payload，渐进式渲染页面。

RSC payload包含以下信息：
- 服务端组件的渲染结果
- 客户端组件的占位和引用文件
- 从服务端组件传给客户端组件的数据

### 持续时间

完整路由缓存默认是持久的，这意味着可以跨用户请求复用。

### 失效方式

有两种方式可以使完整路由缓存失效

- 重新验证数据：重新验证数据缓存会使完整路由缓存失效


