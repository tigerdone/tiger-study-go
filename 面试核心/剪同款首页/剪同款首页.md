

背景
场景，做什么的，

需求
商业化探索

难点
历史逻辑重
生态主要页面
原生改造成跨端方案

## 方案
### 基于双线程
- 首屏能力
- 数据精简
- 数据拍平

### 数据请求逻辑
- 接口预请求
  接入latch接口预先请求
- 图片懒加载预加载
  轮播图，懒加载、IntersectionObserver（判断是否进入视口）
- 缓存
- 接口并行
- 减少数据交互

### 资源
- 包体积优化，拆包，弹窗逻辑，非必要逻辑
- 图片压缩
- treeShaking

### 运行
- 虚拟列表
- 首屏相关任务第一时间阻塞式执尽可能少的执行代码
分类懒渲染


文生图
# 剪映-web性能优化指南 优化方案
## 建连
dns-prefetch
preconnect
preload/prefetch

http2
解决队头阻塞
资源主动推送

## html加载
压缩，Brotli
流式下发
ssr直出

精简代码
http2 push
不要一次性传输过多数据

## 静态资源加载
尽可能使用cdn
缓存时间尽可能长
cdn域名探测
开启更高压缩等级
上级页面预加载
资源包大小平均
保证静态资源优先级合理
无用代码去除
重复代码去除
减少资源变动概率

动态资源转化成静态资源加载
相同优先级的资源并行加载
合理使用各种加载方式

巨型静态资源特殊优化
使用代理加载
-些检查方法

## 数据获取
减少数据交互
数据交互提前
数据交互并行
减少数据转换
分批获取数据
防止数据交互影响其他代码逻辑
追溯慢的基本原因

# 代码执行
首屏相关任务第一时间阻塞式执尽可能少的执行代码
不要用定时器控制代码流程
善用闲时执行
合理使用worker多线程
耗时更多的重要任务尽早异步执?
proxy延迟执行
防止主线程空转
切分主线程longtask

# 业务流程优化
按照具体场景设计更合理的加载按照用户操作习惯设计更合理的草稿协议精简
草稿分片&协议分片
草稿和轨道分层拉取和上屏
草稿云解析
草稿云编辑

# 高性能架构(未来规划)
单向依赖/高性能分层架构
UI&逻辑分离架构
只读&可编辑分离架构
插件化架构
多端分离架构

# 性能防腐系统(未来规划)
开发分支监控
CI流水线监控
性能&稳定性看板监控
性能SRE
竞品数据自动化对比

# -些工具:
Lighthouse
Chrome performance
Wepagetest
自助埋点





